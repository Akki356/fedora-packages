<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">
<xi:include href="../master.html"/>
<head>
<title>Package $package</title>
<script src="/static/js/jquery.js" type="text/javascript"></script>
<script src="/static/js/jquery.dimentions.js" type="text/javascript"></script>
</head>
<body>
    <h2>Package $package</h2>
    <script src="/static/js/myfedora.ui.js" type="text/javascript"></script>
<div id="tabfloat">
<ul id="primary-links">
<span py:for="r in resource_urls"><li><a href="${package_url}/${r}">${r}</a></li> </span>
</ul>
</div>
  <div id="resource_content">
     <!-- TODO: CSS -->
     <form name="builds_navigation_form" action="${current_url}">
       <a onClick="document.builds_navigation_form.direction.value='prev'; document.builds_navigation_form.submit()" href="#" py:if="previous_disabled != 'disabled'">&lt;-- prev </a>
       <a onClick="document.builds_navigation_form.direction.value='next'; document.builds_navigation_form.submit()" href="#" py:if="next_disabled != 'disabled'">next --&gt; </a>
       <input type="hidden" name="offset" value="${offset}" />
       <input type="hidden" name="limit" value="${limit}" />
       <input type="hidden" name="direction" value="next"/>
     </form> 
     <table>
        <tr class="table_header1">
          <td class="table_header_col1">Build ID</td>
          <td class="table_header_col1">Name</td>
          <td class="table_header_col1">Build By</td>
          <td class="table_header_col1">Started</td>
          <td class="table_header_col1">Finished</td>
          <td class="table_header_col1">State</td>
          <td class="table_header_col1">Release</td>
        </tr>
        
        <tr py:for="build in builds_list">
          <td>${str(build['build_id'])}</td>
          <!-- for now send to koji but we want a simpler page
               with the most common info organized nicely -->
          <td py:with="menu_id='menu_' + str(build['build_id'])" >
            <div onMouseOver="mf_menu_hover_start('${menu_id}')" 
                 onMouseOut="mf_menu_hover_stop()">
              <a href="https://koji.fedoraproject.org/koji/buildinfo?buildID=${str(build['build_id'])}" target="_blank">${str(build['nvr'])}</a>
              <div class="menu" id="${menu_id}">
                <ul>
                  <li><a href="https://koji.fedoraproject.org/koji/buildinfo?buildID=${str(build['build_id'])}" target="_blank" >Details</a></li>
                  <li py:with="logs_base_url='http://koji.fedoraproject.org/packages/' + package + '/' + build['version'] + '/' + build['release'] + '/data/logs'">
                    <a href="${logs_base_url}">Logs</a>
                    <span py:if="build['mf_arches']" py:with="arches = build['mf_arches']"> [
                      <span py:for="ar in arches[:-1]">
                        <a href="${logs_base_url}/${ar}">${ar}</a> 
                      </span>]
                    </span>
 
                  </li>
                  <li py:if="build['state'] == 1" py:with="dl_base_url='http://koji.fedoraproject.org/packages/' + package + '/' + build['version'] + '/' + build['release']">
                    <a href="${dl_base_url}">Downloads</a>
                    <span py:if="build['mf_arches']" py:with="arches = build['mf_arches']"> [
                      <span py:for="ar in arches">
                        <a href="${dl_base_url}/${ar}">${ar}</a> 
                      </span>]
                    </span>
                  </li>
                </ul>
              </div>
            </div> 
          </td>
          <td>${str(build['owner_name'])}</td>
          <td>${str(build['creation_time'])}</td>
          <td>${str(build['completion_time'])}</td>
          <td><img src="${str(build['mf_state_img'])}" /></td>
          <td>${str(build['mf_release'])}</td>
        </tr>

     </table> 
  </div>
</body>
</html>
